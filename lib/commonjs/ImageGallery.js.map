{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_ImagePreview","_interopRequireDefault","_SwipeContainer","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","height","deviceHeight","width","deviceWidth","Dimensions","defaultProps","hideThumbs","resizeMode","thumbColor","thumbResizeMode","thumbSize","ImageGallery","props","close","images","initialIndex","isOpen","renderCustomImage","renderCustomThumb","renderFooterComponent","renderHeaderComponent","disableSwipe","activeIndex","setActiveIndex","useState","isDragging","setIsDragging","topRef","useRef","bottomRef","keyExtractorThumb","item","index","id","toString","keyExtractorImage","scrollToIndex","current","animated","_bottomRef$current","_bottomRef$current2","renderItem","createElement","isSelected","renderThumb","TouchableOpacity","onPress","activeOpacity","Image","style","styles","thumb","activeThumb","borderColor","source","uri","thumbUrl","url","onMomentumEnd","x","nativeEvent","contentOffset","Math","round","useEffect","getImageLayout","useCallback","_","length","offset","getThumbLayout","Modal","animationType","visible","View","container","FlatList","initialScrollIndex","getItemLayout","data","horizontal","keyExtractor","onMomentumScrollEnd","pagingEnabled","ref","scrollEnabled","showsHorizontalScrollIndicator","contentContainerStyle","thumbnailListContainer","bottomFlatlist","bottom","header","footer","StyleSheet","create","alignItems","backgroundColor","flex","justifyContent","position","top","borderWidth","borderRadius","marginRight","paddingHorizontal","_default","exports"],"sources":["ImageGallery.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport {\n  Dimensions,\n  FlatList,\n  Image,\n  Modal,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport { ImageObject, IProps, RenderImageProps } from './types';\nimport ImagePreview from './ImagePreview';\nimport SwipeContainer from './SwipeContainer';\n\nconst { height: deviceHeight, width: deviceWidth } = Dimensions.get('window');\n\nconst defaultProps = {\n  hideThumbs: false,\n  resizeMode: 'contain',\n  thumbColor: '#d9b44a',\n  thumbResizeMode: 'cover',\n  thumbSize: 48,\n};\n\nconst ImageGallery = (props: IProps & typeof defaultProps) => {\n  const {\n    close,\n    hideThumbs,\n    images,\n    initialIndex,\n    isOpen,\n    renderCustomImage,\n    renderCustomThumb,\n    renderFooterComponent,\n    renderHeaderComponent,\n    resizeMode,\n    thumbColor,\n    thumbResizeMode,\n    thumbSize,\n    disableSwipe,\n  } = props;\n\n  const [activeIndex, setActiveIndex] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const topRef = useRef<FlatList>(null);\n  const bottomRef = useRef<FlatList>(null);\n\n  const keyExtractorThumb = (item: ImageObject, index: number) =>\n    item && item.id ? item.id.toString() : index.toString();\n  const keyExtractorImage = (item: ImageObject, index: number) =>\n    item && item.id ? item.id.toString() : index.toString();\n\n  const scrollToIndex = (i: number) => {\n    setActiveIndex(i);\n\n    if (topRef?.current) {\n      topRef.current.scrollToIndex({\n        animated: true,\n        index: i,\n      });\n    }\n    if (bottomRef?.current) {\n      if (i * (thumbSize + 10) - thumbSize / 2 > deviceWidth / 2) {\n        bottomRef?.current?.scrollToIndex({\n          animated: true,\n          index: i,\n        });\n      } else {\n        bottomRef?.current?.scrollToIndex({\n          animated: true,\n          index: 0,\n        });\n      }\n    }\n  };\n\n  const renderItem = ({ item, index }: RenderImageProps) => {\n    return (\n      <ImagePreview\n        index={index}\n        isSelected={activeIndex === index}\n        item={item}\n        resizeMode={resizeMode}\n        renderCustomImage={renderCustomImage}\n      />\n    );\n  };\n\n  const renderThumb = ({ item, index }: RenderImageProps) => {\n    return (\n      <TouchableOpacity\n        onPress={() => scrollToIndex(index)}\n        activeOpacity={0.8}\n      >\n        {renderCustomThumb ? (\n          renderCustomThumb(item, index, activeIndex === index)\n        ) : (\n          <Image\n            resizeMode={thumbResizeMode}\n            style={\n              activeIndex === index\n                ? [\n                    styles.thumb,\n                    styles.activeThumb,\n                    { borderColor: thumbColor },\n                    { width: thumbSize, height: thumbSize },\n                  ]\n                : [styles.thumb, { width: thumbSize, height: thumbSize }]\n            }\n            source={{ uri: item.thumbUrl ? item.thumbUrl : item.url }}\n          />\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  const onMomentumEnd = (e: any) => {\n    const { x } = e.nativeEvent.contentOffset;\n    scrollToIndex(Math.round(x / deviceWidth));\n  };\n\n  useEffect(() => {\n    if (isOpen && initialIndex) {\n      setActiveIndex(initialIndex);\n    } else if (!isOpen) {\n      setActiveIndex(0);\n    }\n  }, [isOpen, initialIndex]);\n\n  const getImageLayout = useCallback((_, index) => {\n    return {\n      index,\n      length: deviceWidth,\n      offset: deviceWidth * index,\n    };\n  }, []);\n\n  const getThumbLayout = useCallback(\n    (_, index) => {\n      return {\n        index,\n        length: thumbSize,\n        offset: thumbSize * index,\n      };\n    },\n    [thumbSize]\n  );\n\n  return (\n    <Modal animationType={isOpen ? 'slide' : 'fade'} visible={isOpen}>\n      <View style={styles.container}>\n        <SwipeContainer\n          disableSwipe={disableSwipe}\n          setIsDragging={setIsDragging}\n          close={close}\n        >\n          <FlatList\n            initialScrollIndex={initialIndex}\n            getItemLayout={getImageLayout}\n            data={images}\n            horizontal\n            keyExtractor={keyExtractorImage}\n            onMomentumScrollEnd={onMomentumEnd}\n            pagingEnabled\n            ref={topRef}\n            renderItem={renderItem}\n            scrollEnabled={!isDragging}\n            showsHorizontalScrollIndicator={false}\n          />\n        </SwipeContainer>\n        {hideThumbs ? null : (\n          <FlatList\n            initialScrollIndex={initialIndex}\n            getItemLayout={getThumbLayout}\n            contentContainerStyle={styles.thumbnailListContainer}\n            data={props.images}\n            horizontal\n            keyExtractor={keyExtractorThumb}\n            pagingEnabled\n            ref={bottomRef}\n            renderItem={renderThumb}\n            showsHorizontalScrollIndicator={false}\n            style={[styles.bottomFlatlist, { bottom: thumbSize }]}\n          />\n        )}\n        {renderHeaderComponent ? (\n          <View style={styles.header}>\n            {renderHeaderComponent(images[activeIndex], activeIndex)}\n          </View>\n        ) : null}\n        {renderFooterComponent ? (\n          <View style={styles.footer}>\n            {renderFooterComponent(images[activeIndex], activeIndex)}\n          </View>\n        ) : null}\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    alignItems: 'center',\n    backgroundColor: 'black',\n    flex: 1,\n    height: deviceHeight,\n    justifyContent: 'center',\n    width: deviceWidth,\n  },\n\n  header: {\n    position: 'absolute',\n    top: 0,\n    width: '100%',\n  },\n  footer: {\n    bottom: 0,\n    position: 'absolute',\n    width: '100%',\n  },\n  activeThumb: {\n    borderWidth: 3,\n  },\n  thumb: {\n    borderRadius: 12,\n    marginRight: 10,\n  },\n  thumbnailListContainer: {\n    paddingHorizontal: 10,\n  },\n  bottomFlatlist: {\n    position: 'absolute',\n  },\n});\n\nImageGallery.defaultProps = defaultProps;\n\nexport default ImageGallery;\n"],"mappings":"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","ignoreList":[]}